# Hashes no Windows

## LM

LM-hashes é o armazenamento de senha mais antigo usado pelo Windows, datando do OS / 2 na década de 1980. Devido ao conjunto limitado de caracteres permitido, eles são bastante fáceis de quebrar. Você pode obtê-los, se ainda estiverem disponíveis, no banco de dados SAM em um sistema Windows ou no banco de dados NTDS no Controlador de Domínio.
O LM foi desativado por padrão a partir do Windows Vista / Server 2008, mas ainda pode permanecer em uma rede se sistemas mais antigos ainda forem usados. É possível habilitá-lo em versões posteriores por meio de uma configuração de GPO.
Ao despejar o banco de dados SAM / NTDS, eles são mostrados junto com o NTHash, antes dos dois pontos

## Autenticação NTLM

NTLM Autenticação no Windows 10: NTLM é um New Technology LAN Manager. É um pacote especial para protocolos de segurança fornecidos pela Microsoft para autenticar a identidade dos clientes e defender a integridade e confidencialidade de suas ações. Essa tecnologia é baseada no protocolo de resposta de desafio para confirmar o cliente sem a necessidade de fornecer uma senha.

É assim que as senhas são armazenadas em sistemas Windows modernos e podem ser obtidas despejando o banco de dados SAM ou usando o Mimikatz. Eles também são armazenados em controladores de domínio no arquivo NTDS. 

NTLM Autentica clientes por meio de um método de desafio-resposta. Esse processo tem três mensagens, como Mensagem de negociação do cliente, Mensagem de desafio do servidor e Mensagem de autenticação do usuário. No entanto, devido às vulnerabilidades conhecidas, o NTLM ainda é amplamente implantado, mesmo em novos sistemas, com o objetivo de manter a compatibilidade com clientes e servidores legados.

O NTLMé baseado em'hashing de senha'- recurso unilateral que gera uma string de texto em um arquivo de entrada, no entanto, 'Kerberos' baseia-se na criptografia - recurso bidirecional que embaralha e desbloqueia dados por meio de chaves de criptografia e descriptografia.

## Problemas com o protocolo NTLM

 - O hash de senha mantido na memória do serviço LSA pode ser facilmente obtido por meio de vários utilitários como o mimikatz e, em seguida, a senha hash pode ser aplicada para ataques subsequentes.

 - Senhas fracas ou triviais são outro fator para problemas de protocolo NTLM .

 - A falta de autenticação mútua entre servidor e cliente que leva a ataques de interceptação de dados e acesso não autorizado aos dados da rede.
Outros vazamentos ou problemas do NTLM .


