# Protocolo ARP

O procotolo ARP (Address Resolution Protocol) é um protocolo de pergunta e resposta, utilizado para mapear dinamicamente os endereços da camada 3 (rede) com a camada 2 (enlace). Ele é utilizado para mapear endereços ips em MAC Address (Media Access Control).
Cada máquina ligada a rede possui um numero de indentificaçlão de 48 bits, porém a comunicação não é feita através desse numero, mas através do endereço IP.
O protocolo arp fo definido pela <a href="https://www.ietf.org/rfc/rfc826.txt"> RFC 826</a>.

O protocolo ARP básicamente pergunta as máquinas da rede para conhecer seu endereço fisico, e depois cria uma tabela de correspondencia entre endereços lógicos e endereços físicos. Quando uma máquina tem que se comunicar com outra ele consulta essa tabela.

Se o endereço solicitado não se encontra na tabela, o protocolo ARP emite um pedido na rede. Dessa forma, o conjunto das máquinas da rede vai comparar este endereço lógico ao seu. Se uma delas se identificar com esse endereço, a máquina responde ao ARP, que vai armazenar o par de endereços na tabela de correspondência e, assim, a comunicação pode ser feita.

## Tipos de Mensagens ARP

Há dois tipos diferentes de mensagens enviadas pelo protocolo ARP, uma da origem ao destino, e outra do destino à origem. Para cada mensagem ARP, definimos como remetente quem transmite a mensagem e alvo quem deve recebê-la. As mensagens são:

- ARP Request (Requisição ARP): Mensagem enviada requisitando a resolução de um endereço IP em endereço físico.
- ARP Reply (Resposta ARP): Mensagem de resposta ao ARP Request, contendo o endereço físico resolvido.

## Formato do Pacote ARP


A descrição de cada campo é dada seguir:

#### HTYPE 

-Hardware Type (Tipo de hardware): Especifica o tipo de protocolo da rede, como Ethernet, cujo valor é 1. Outros tipos comuns incluem Frame Relay (15), ATM (16) e HDLC (17).

#### PTYPE 

– Protocol Type (Tipo de Protocolo): Especifica o protocolo da camada de internet para o qual a requisição do ARP é direcionada.O valor para o protocolo IPv4 é 0x0800.

#### HLEN 

– Hardware Length (Comprimento do Hardware): Tamanho do endereço de hardware, em grupos de oito bits (octetos). Um MAC Address Ethernet tem o tamanho de 6.

#### PLEN 

– Protocol Length (Comprimento do Protocolo): Tamanho, em octetos, do endereço especificado no campo PTYPE. Para o protocolo IPv4, o tamanho é 4

#### OPER 

– Operation (Operação): Tipo de operação que o transmissor está realizando, sendo o valor 1 para ARP Request (Requisição ARP), e 2 para ARP Reply (Resposta ARP).

#### SHA 

– Sender Address Hardware (Endereço Físico do Remetente): Endereço MAC do transmissor. Quando se trata de um pacote ARP Request, contém o endereço físico do remetente. Já em uma mensagem ARP Reply, contém o endereço físico procurado (resolvido).

#### SPA 

– Sender Protocol Address (Endereço do Remetente): Endereço da camada de internet do remetente (IP)

#### THA 

– Target Hardware Address (Endereço de Hardware do Alvo): Endereço físico do destinatário pretendido. Esse campo é ignorado em um pacote ARP Request (por razões óbvias), e em um pacote ARP Reply contém o endereço físico do host que originou a requisição ARP.

#### TPA 

– Target Protocol Address (Endereço de Protocolo do Alvo): Endereço da camada de internet (IP) do destinatário pretendido.